package com.genesis.util;

import java.util.List;

import javax.servlet.http.HttpServletRequest;

import org.springframework.stereotype.Component;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;

@Component
public class Utilities {

	public String extractIPAddress(HttpServletRequest request) {
		// Get the IP address of the client making the request
		String ipAddress = request.getRemoteAddr();
		String forwardedFor = request.getHeader("X-Forwarded-For");
		if (forwardedFor != null && !forwardedFor.isEmpty()) {
			ipAddress = forwardedFor.split(",")[0].trim();
		}
		return ipAddress;
	}

	public static <T> List<T> convertToOriginalObject(Object object, Class<T> type) {
		List<T> finalObject = null;
		ObjectMapper objectMapper = new ObjectMapper();
		objectMapper.registerModule(new JavaTimeModule());
		if (object != null) {
			finalObject = (List<T>) objectMapper.convertValue(object, type);
		}
		return finalObject;
	}
}
